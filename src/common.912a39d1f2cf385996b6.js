(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"6FaO":function(i,e,t){"use strict";t.d(e,"a",function(){return j});var n=t("fXoL"),o=t("JPLv"),c=t("yx6F"),s=t("ofXK"),l=t("hXFv"),a=t("uQe+"),r=t("CbTO"),d=t("G0DZ"),u=t("7fcA");const h=["element"];function p(i,e){if(1&i&&n.Qb(0,"app-dynamic-grid",7),2&i){const i=n.jc(2).$implicit;n.pc("path",i.path)("file",i.file)("partOfTab",!0)}}function f(i,e){1&i&&n.Fc(0,p,1,3,"ng-template",null,6,n.Gc)}function g(i,e){if(1&i&&n.Qb(0,"app-dynamic-forms",8),2&i){const i=n.jc(2).$implicit;n.pc("path",i.path)("file",i.file)("disableEdit",!0)}}function v(i,e){1&i&&n.Fc(0,g,1,3,"ng-template",null,6,n.Gc)}function b(i,e){if(1&i&&n.Qb(0,"app-dynamic-action-button",10),2&i){const i=n.jc(3).$implicit;n.pc("data",i.actionButtons)}}function S(i,e){if(1&i&&(n.Fc(0,b,1,1,"app-dynamic-action-button",9),n.Qb(1,"app-dynamic-scheduler",7)),2&i){const i=n.jc(2).$implicit;n.pc("ngIf",i.actionButtons),n.Bb(1),n.pc("path",i.path)("file",i.file)("partOfTab",!0)}}function m(i,e){1&i&&n.Fc(0,S,2,4,"ng-template",null,6,n.Gc)}function y(i,e){if(1&i&&n.Qb(0,"app-dynamic-tabs",11),2&i){const i=n.jc(2).$implicit;n.pc("path",i.path)("file",i.file)}}function w(i,e){1&i&&n.Fc(0,y,1,2,"ng-template",null,6,n.Gc)}function F(i,e){if(1&i&&(n.Vb(0,"e-tabitem",4),n.Fc(1,f,2,0,void 0,5),n.Fc(2,v,2,0,void 0,5),n.Fc(3,m,2,0,void 0,5),n.Fc(4,w,2,0,void 0,5),n.Ub()),2&i){const i=e.$implicit,t=n.jc(2);n.pc("header",i.title),n.Bb(1),n.pc("ngIf","grid"===i.type&&t.helpService.checkRights(i.rights)),n.Bb(1),n.pc("ngIf","forms"===i.type&&t.helpService.checkRights(i.rights)),n.Bb(1),n.pc("ngIf","scheduler"===i.type&&t.helpService.checkRights(i.rights)),n.Bb(1),n.pc("ngIf","tabs"===i.type&&t.helpService.checkRights(i.rights))}}function O(i,e){if(1&i&&(n.Vb(0,"ejs-tab",1,2),n.Vb(2,"e-tabitems"),n.Fc(3,F,5,5,"e-tabitem",3),n.Ub(),n.Ub()),2&i){const i=n.jc();n.Bb(3),n.pc("ngForOf",i.config)}}let j=(()=>{class i{constructor(i,e){this.configurationService=i,this.helpService=e,this.config=[]}ngOnInit(){this.initializeConfig()}initializeConfig(){this.configurationService.getConfiguration(this.path,this.file).subscribe(i=>{for(let e=0;e<i.length;e++)this.helpService.checkRights(i[e].rights)&&this.config.push(i[e]);setTimeout(()=>{this.tabObj.element.classList.add("e-fill")},50)})}}return i.\u0275fac=function(e){return new(e||i)(n.Pb(o.a),n.Pb(c.a))},i.\u0275cmp=n.Jb({type:i,selectors:[["app-dynamic-tabs"]],viewQuery:function(i,e){if(1&i&&n.Lc(h,1),2&i){let i;n.vc(i=n.gc())&&(e.tabObj=i.first)}},inputs:{path:"path",file:"file"},decls:1,vars:1,consts:[["id","tab_default",4,"ngIf"],["id","tab_default"],["element",""],[3,"header",4,"ngFor","ngForOf"],[3,"header"],[4,"ngIf"],["content",""],[3,"path","file","partOfTab"],[3,"path","file","disableEdit"],[3,"data",4,"ngIf"],[3,"data"],[3,"path","file"]],template:function(i,e){1&i&&n.Fc(0,O,4,1,"ejs-tab",0),2&i&&n.pc("ngIf",e.config)},directives:[s.l,l.a,l.c,s.k,l.b,a.a,r.a,d.a,u.a,i],styles:[""]}),i})()},G0DZ:function(i,e,t){"use strict";t.d(e,"a",function(){return m});var n=t("8DoO"),o=t("CbTO"),c=t("fXoL"),s=t("JPLv"),l=t("yx6F"),a=t("U0ZT"),r=t("IKtL"),d=t("tyNb"),u=t("ofXK"),h=t("QLw0"),p=t("3Pt+");const f=["scheduleObj"];function g(i,e){1&i&&(c.Vb(0,"div",2),c.Qb(1,"app-loader"),c.Ub())}function v(i,e){if(1&i){const i=c.Wb();c.Vb(0,"div",7),c.Vb(1,"div"),c.Vb(2,"app-dynamic-forms",8,9),c.fc("submit",function(e){return c.yc(i),c.jc(2).submitEmitter(e)}),c.Ub(),c.Ub(),c.Ub()}if(2&i){const i=c.jc(2);c.Bb(2),c.pc("config",i.config)}}function b(i,e){if(1&i&&(c.Vb(0,"e-resources"),c.Qb(1,"e-resource",10),c.Ub()),2&i){const i=c.jc(2);c.Bb(1),c.pc("field",i.config.resources.field)("dataSource",i.resources)("allowMultiple",null==i.config.resources?null:i.config.resources.allowMultipleOwner)("idField",i.config.resources.idField)("colorField",i.config.resources.colorField)}}function S(i,e){if(1&i){const i=c.Wb();c.Vb(0,"ejs-schedule",3,4),c.fc("popupOpen",function(e){return c.yc(i),c.jc().onPopupOpen(e)})("actionBegin",function(e){return c.yc(i),c.jc().actionBegin(e)})("actionComplete",function(e){return c.yc(i),c.jc().actionComplete(e)})("dataBound",function(e){return c.yc(i),c.jc().onDataBound(e)})("renderCell",function(e){return c.yc(i),c.jc().onRenderCell(e)}),c.Fc(2,v,4,1,"ng-template",null,5,c.Gc),c.Fc(4,b,2,5,"e-resources",6),c.Ub()}if(2&i){const i=c.jc();c.pc("height",i.height)("views",null==i.config?null:i.config.views)("eventSettings",i.eventSettings)("showQuickInfo",null==i.config?null:i.config.showQuickInfo)("currentView",null==i.config?null:i.config.currentView)("startHour",null==i.config?null:i.config.startHour)("endHour",null==i.config?null:i.config.endHour)("interval",null==i.config?null:i.config.interval),c.Bb(4),c.pc("ngIf",null==i.config?null:i.config.resources)}}let m=(()=>{class i{constructor(i,e,t,n,o){this.configurationService=i,this.helpService=e,this.apiService=t,this.toastr=n,this.router=o,this.eventSettings={},this.loader=!1,this.data=[],this.resources=[],this.isTootipDelayApplied=!1}ngOnInit(){this.loader=!0,this.initializeConfig()}onResize(){this.height=this.helpService.getHeightForSchedulerWithoutPx(this.partOfTab)}initializeConfig(){this.language=this.helpService.getLanguage(),this.configurationService.getConfiguration(this.path,this.file).subscribe(i=>{var e;this.config=i,this.getData(null===(e=this.config)||void 0===e?void 0:e.request),this.config.resources&&this.getResources(),this.initializeSchedulerConfig(),this.height=this.helpService.getHeightForSchedulerWithoutPx(this.partOfTab)})}initializeSchedulerConfig(){var i,e,t,n,o,c,s,l,a,r,d;(null===(i=this.config)||void 0===i?void 0:i.tooltip)&&(null===(t=null===(e=this.config)||void 0===e?void 0:e.tooltip)||void 0===t?void 0:t.display)&&(this.eventSettings.enableTooltip=null===(o=null===(n=this.config)||void 0===n?void 0:n.tooltip)||void 0===o?void 0:o.display),(null===(c=this.config)||void 0===c?void 0:c.editOptions)&&(void 0===(null===(s=this.config)||void 0===s?void 0:s.editOptions.allowAdding)&&null===(null===(l=this.config)||void 0===l?void 0:l.editOptions.allowAdding)||(this.eventSettings.allowAdding=null===(a=this.config)||void 0===a?void 0:a.editOptions.allowAdding),(void 0!==this.config.editOptions.allowEditing||(null===(r=this.config)||void 0===r?void 0:r.editOptions.allowEditing))&&(this.eventSettings.allowEditing=this.config.editOptions.allowEditing),(void 0!==this.config.editOptions.allowDeleting||(null===(d=this.config)||void 0===d?void 0:d.editOptions.allowDeleting))&&(this.eventSettings.allowDeleting=this.config.editOptions.allowDeleting))}getData(i){let e="";i.parameters&&(e=this.helpService.getRequestDataParameters(this.router.snapshot.params,i.parameters)),this.apiService.callGetMethod(i.api,e).subscribe(i=>{var e;this.eventSettings.dataSource=i||[],(null===(e=this.config)||void 0===e?void 0:e.resources)||(this.loader=!1)},i=>{this.eventSettings.dataSource=[],this.loader=!1})}getResources(){var i;this.loader=!0,(null===(i=this.config)||void 0===i?void 0:i.resources)?this.apiService.callGetMethod(this.config.resources.request.api,"").subscribe(i=>{this.resources=i,this.loader=!1},i=>{this.resources=[]}):this.loader=!1}onPopupOpen(i){"QuickInfo"===i.type&&(this.selectedData=i.data,setTimeout(()=>{var i;this.setValue(null===(i=this.config)||void 0===i?void 0:i.config,this.selectedData)},50))}onDataBound(){var i,e,t,n,o,c;if(null===(e=null===(i=this.config)||void 0===i?void 0:i.tooltip)||void 0===e?void 0:e.display){let i=this.scheduleObj.element.ej2_instances[2];i.mouseTrail=!1,i.openDelay=null===(n=null===(t=this.config)||void 0===t?void 0:t.tooltip)||void 0===n?void 0:n.openDelay,i.position=null===(c=null===(o=this.config)||void 0===o?void 0:o.tooltip)||void 0===c?void 0:c.position}}onRenderCell(i){i.date<new Date&&i.element.classList.add("e-disable-dates")}actionBegin(i){var e,t,n,o;if("toolbarItemRendering"===i.requestType){if(null===(t=null===(e=this.config)||void 0===e?void 0:e.toolbar)||void 0===t?void 0:t.exportToExcel){const e={align:"Right",showTextOn:"Both",prefixIcon:"e-icon-schedule-excel-export",text:this.language.exportToExcelScheduler,cssClass:"e-excel-export",click:this.exportExcel.bind(this)};i.items.push(e)}if(null===(o=null===(n=this.config)||void 0===n?void 0:n.toolbar)||void 0===o?void 0:o.print){const e={align:"Right",showTextOn:"Both",prefixIcon:"e-icon-schedule-print",text:this.language.printScheduler,cssClass:"e-print",click:this.printScheduler.bind(this)};i.items.push(e)}}}actionComplete(i){"eventCreated"===i.requestType?this.createData(i.addedRecords[0]):"eventChanged"===i.requestType?this.updateData(i.changedRecords[0]):"eventRemoved"===i.requestType&&this.deleteData(i.deletedRecords[0])}createData(i){i=this.convertSubmitValue(i),this.callApi(this.config.editSettingsRequest.add,i)}updateData(i){delete i.Id,i=this.convertSubmitValue(i),this.callApi(this.config.editSettingsRequest.edit,i);const e=this.eventSettings.dataSource.findIndex(e=>e.id==i.id);this.eventSettings.dataSource[e]=i}deleteData(i){delete i.Id,this.callApi(this.config.editSettingsRequest.delete,i);const e=this.eventSettings.dataSource.findIndex(e=>e.id==i.id);this.eventSettings.dataSource.splice(e,1)}callApi(i,e,t){if("POST"===i.type.toUpperCase())this.callApiPost(i.api,e,t);else if(i.url){const e=this.helpService.getRequestDataParameters(this.router.snapshot.params,i.url);this.callApiGet(i.api,e)}else{const e=this.helpService.getRequestDataParameters(this.router.snapshot.params,i.parameters);this.callApiGet(i.api,e)}}callApiPost(i,e,t){this.apiService.callPostMethod(i,e).subscribe(i=>i?(this.toastr.showSuccess(),t?(this.scheduleObj.refreshEvents(),!0):(this.scheduleObj.refreshEvents(),i)):(this.toastr.showError(),!1),i=>(this.toastr.showError(),!1))}callApiGet(i,e,t){this.apiService.callGetMethod(i,e).subscribe(i=>!!i&&!t&&i,i=>!1)}setValue(i,e){for(let t=0;t<i.length;t++)void 0!==this.form&&this.form.setValue(i[t].name,this.helpService.convertValueToSpecificType(e[i[t].name],this.config.config[t].type),i[t].type),this.config.config[t].value=this.helpService.convertValueToSpecificType(e[i[t].name],this.config.config[t].type)}convertSubmitValue(i){var e,t,n,o,c,s,l,a;if(null===(e=this.config)||void 0===e?void 0:e.convertSubmitValue)for(let r=0;r<(null===(t=this.config)||void 0===t?void 0:t.convertSubmitValue.length);r++)i[this.config.convertSubmitValue[r].field]=this.helpService.convertValueToSpecificType(i[this.config.convertSubmitValue[r].field],null!==(n=this.config.convertSubmitValue[r].type)&&void 0!==n?n:"");if(null===(o=this.config)||void 0===o?void 0:o.displayFieldForSubject){i.Subject="";for(let e=0;e<this.config.displayFieldForSubject.length;e++)void 0!==i[null===(c=this.config)||void 0===c?void 0:c.displayFieldForSubject[e]]&&null!==i[null===(s=this.config)||void 0===s?void 0:s.displayFieldForSubject[e]]?i.Subject+=i[null===(l=this.config)||void 0===l?void 0:l.displayFieldForSubject[e]]:i.Subject+=null===(a=this.config)||void 0===a?void 0:a.displayFieldForSubject[e]}return i}exportExcel(){this.scheduleObj.exportToExcel()}printScheduler(){this.scheduleObj.print()}}return i.\u0275fac=function(e){return new(e||i)(c.Pb(s.a),c.Pb(l.a),c.Pb(a.a),c.Pb(r.a),c.Pb(d.a))},i.\u0275cmp=c.Jb({type:i,selectors:[["app-dynamic-scheduler"]],viewQuery:function(i,e){if(1&i&&(c.Lc(o.a,1),c.Lc(f,1)),2&i){let i;c.vc(i=c.gc())&&(e.form=i.first),c.vc(i=c.gc())&&(e.scheduleObj=i.first)}},hostBindings:function(i,e){1&i&&c.fc("resize",function(i){return e.onResize(i)},!1,c.xc)},inputs:{path:"path",file:"file",partOfTab:"partOfTab"},features:[c.Ab([n.b,n.p,n.q,n.e,n.r,n.a,n.n,n.m,n.o,n.h,n.c,n.d,n.f])],decls:2,vars:2,consts:[["style","height: 70vh",4,"ngIf"],["width","100%",3,"height","views","eventSettings","showQuickInfo","currentView","startHour","endHour","interval","popupOpen","actionBegin","actionComplete","dataBound","renderCell",4,"ngIf"],[2,"height","70vh"],["width","100%",3,"height","views","eventSettings","showQuickInfo","currentView","startHour","endHour","interval","popupOpen","actionBegin","actionComplete","dataBound","renderCell"],["scheduleObj",""],["editorTemplate",""],[4,"ngIf"],["ngForm",""],[3,"config","submit"],["form","dynamicForm"],["textField","color",3,"field","dataSource","allowMultiple","idField","colorField"]],template:function(i,e){1&i&&(c.Fc(0,g,2,0,"div",0),c.Fc(1,S,5,9,"ejs-schedule",1)),2&i&&(c.pc("ngIf",e.loader),c.Bb(1),c.pc("ngIf",!e.loader))},directives:[u.l,h.a,n.l,p.j,p.k,o.a,n.j,n.i],styles:[".e-footer-content{display:none}.e-disable-dates{pointer-events:none}"],encapsulation:2}),i})()}}]);